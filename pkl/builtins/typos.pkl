import "../Config.pkl"

typos = new Config.Step {
  category = "Special Purpose"
  description = "Source code spell checker"
  glob = "**/*"
  stage = "<JOB_FILES>"
  check_diff =
    """
    output=$(typos --diff {{files}})
    [ -z "$output" ] && exit 0
    printf "%s" "$output"
    exit 1
    """
  fix = "typos --write-changes {{ files }}"
}
